<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<title data-react-helmet="true">API | useStateMachine</title><meta data-react-helmet="true" property="og:url" content="https://cassiozen.github.io/docs/api/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="API | useStateMachine"><meta data-react-helmet="true" name="description" content="`ts"><meta data-react-helmet="true" property="og:description" content="`ts"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://cassiozen.github.io/docs/api/"><link data-react-helmet="true" rel="alternate" href="https://cassiozen.github.io/docs/api/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://cassiozen.github.io/docs/api/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.0fcb31fe.css">
<link rel="preload" href="/assets/js/runtime~main.c67d40e1.js" as="script">
<link rel="preload" href="/assets/js/main.14e444e8.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="useStateMachine Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="useStateMachine Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">useStateMachine</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active navbar__link--active" href="/docs/api/">API Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/cassiozen/useStateMachine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT" style="margin-left:2px">ðŸŒ™</span></div><div class="react-toggle-track-x"><span class="toggle_71bT" style="margin-left:1px">â˜€</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started/">Getting Started</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/api/">API</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/upgrading-from-0xx/">Upgrading from 0.x.x</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">API</h1></header><pre class="shiki min-light" style="background-color:#ffffff;color:#24292eff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#D32F2F">const</span><span style="color:#24292EFF"> [</span><span style="color:#1976D2">state</span><span style="color:#24292EFF">, </span><span style="color:#1976D2">send</span><span style="color:#24292EFF">] </span><span style="color:#D32F2F">=</span><span style="color:#24292EFF"> </span><span style="color:#6F42C1">useStateMachine</span><span style="color:#24292EFF">(</span><span style="color:#C2C3C5">/* State Machine Definition */</span><span style="color:#24292EFF">);</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#F97583">const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">state</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">send</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0">useStateMachine</span><span style="color:#E1E4E8">(</span><span style="color:#6A737D">/* State Machine Definition */</span><span style="color:#E1E4E8">);</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p><code>useStateMachine</code> takes a JavaScript object as the state machine definition. It returns an array consisting of a <code>current machine state</code> object and a <code>send</code> function to trigger transitions.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="state"></a>state<a class="hash-link" href="#state" title="Direct link to heading">#</a></h2><p>The machine&#x27;s <code>state</code> consists of 4 properties: <code>value</code>, <code>event</code>, <code>nextEvents</code> and <code>context</code>.</p><p><code>value</code> (string): Returns the name of the current state.</p><p><code>event</code> (<code>{type: string}</code>; Optional): The name of the last sent event that led to this state.</p><p><code>nextEvents</code> (<code>string[]</code>): An array with the names of available events to trigger transitions from this state.</p><p><code>context</code>: The state machine extended state. See &quot;Extended State&quot; below.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="send-events"></a>Send events<a class="hash-link" href="#send-events" title="Direct link to heading">#</a></h2><p><code>send</code> takes an event as argument, provided in shorthand string format (e.g. &quot;TOGGLE&quot;) or as an event object (e.g. <code>{ type: &quot;TOGGLE&quot; }</code>)</p><p>If the current state accepts this event, and it is allowed (see guard), it will change the state machine state and execute effects.</p><p>You can also send additional data with your event using the object notation (e.g. <code>{ type: &quot;UPDATE&quot; value: 10 }</code>). Check <a href="#schema-context--event-typing">schema</a> for more information about strong typing the additional data.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="state-machine-definition"></a>State Machine definition<a class="hash-link" href="#state-machine-definition" title="Direct link to heading">#</a></h2><table><thead><tr><th>Key</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>verbose</td><td></td><td>If true, will log every context &amp; state changes. Log messages will be stripped out in the production build.</td></tr><tr><td>schema</td><td></td><td>For usage with TypeScript only. Optional strongly-typed context &amp; events. More on schema <a href="#schema-context--event-typing">below</a></td></tr><tr><td>context</td><td></td><td>Context is the machine&#x27;s extended state. More on extended state <a href="#extended-state-context">below</a></td></tr><tr><td>initial</td><td>*</td><td>The initial state node this machine should be in</td></tr><tr><td>states</td><td>*</td><td>Define the possible finite states the state machine can be in.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="defining-states"></a>Defining States<a class="hash-link" href="#defining-states" title="Direct link to heading">#</a></h2><p>A finite state machine can be in only one of a finite number of states at any given time. As an application is interacted with, events cause it to change state.</p><p>States are defined with the state name as a key and an object with two possible keys: <code>on</code> (which events this state responds to) and <code>effect</code> (run arbitrary code when entering or exiting this state):</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="on-events--transitions"></a>On (Events &amp; transitions)<a class="hash-link" href="#on-events--transitions" title="Direct link to heading">#</a></h3><p>Describes which events this state responds to (and to which other state the machine should transition to when this event is sent):</p><pre class="shiki min-light twoslash lsp" style="background-color:#ffffff;color:#24292eff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#D32F2F">const</span><span style="color:#24292EFF"> [</span><span style="color:#1976D2"><data-lsp lsp="const state: {
    value: &quot;active&quot;;
    context: undefined;
    event: Machine.EntryEventForStateValue&lt;{
        initial: &quot;active&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
            };
        };
    }, &quot;active&quot;&gt;;
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    ...;
}">state</data-lsp></span><span style="color:#24292EFF">, </span><span style="color:#1976D2"><data-lsp lsp="const send: Machine.Send&lt;{
    initial: &quot;active&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}&gt;">send</data-lsp></span><span style="color:#24292EFF">] </span><span style="color:#D32F2F">=</span><span style="color:#24292EFF"> </span><span style="color:#6F42C1"><data-lsp lsp="(alias) useStateMachine&lt;{
    initial: &quot;active&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}&gt;(definition: A.InferNarrowestObject&lt;{
    initial: &quot;active&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}&gt;): [state: ...]
import useStateMachine">useStateMachine</data-lsp></span><span style="color:#24292EFF">({</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) initial: &quot;active&quot;">initial</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;active&#x27;</span><span style="color:#24292EFF">,</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) states: A.InferNarrowestObject&lt;{
    inactive: {
        on: {
            TOGGLE: &quot;active&quot;;
        };
    };
    active: {
        on: {
            TOGGLE: &quot;inactive&quot;;
        };
    };
}&gt;">states</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) inactive: A.InferNarrowestObject&lt;{
    on: {
        TOGGLE: &quot;active&quot;;
    };
}&gt;">inactive</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">      <data-lsp lsp="(property) on: A.InferNarrowestObject&lt;{
    TOGGLE: &quot;active&quot;;
}&gt;">on</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">        <data-lsp lsp="(property) TOGGLE: &quot;active&quot;">TOGGLE</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;active&#x27;</span><span style="color:#24292EFF">,</span></div><div class="line"><span style="color:#24292EFF">      }</span></div><div class="line"><span style="color:#24292EFF">    },</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) active: A.InferNarrowestObject&lt;{
    on: {
        TOGGLE: &quot;inactive&quot;;
    };
}&gt;">active</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">      <data-lsp lsp="(property) on: A.InferNarrowestObject&lt;{
    TOGGLE: &quot;inactive&quot;;
}&gt;">on</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">        <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot;">TOGGLE</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;inactive&#x27;</span><span style="color:#24292EFF">,</span></div><div class="line"><span style="color:#24292EFF">      }</span></div><div class="line"><span style="color:#24292EFF">    },</span></div><div class="line"><span style="color:#24292EFF">  }</span></div><div class="line"><span style="color:#24292EFF">})</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki github-dark twoslash lsp" style="background-color:#24292e;color:#e1e4e8"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#F97583">const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF"><data-lsp lsp="const state: {
    value: &quot;active&quot;;
    context: undefined;
    event: Machine.EntryEventForStateValue&lt;{
        initial: &quot;active&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
            };
        };
    }, &quot;active&quot;&gt;;
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    ...;
}">state</data-lsp></span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF"><data-lsp lsp="const send: Machine.Send&lt;{
    initial: &quot;active&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}&gt;">send</data-lsp></span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0"><data-lsp lsp="(alias) useStateMachine&lt;{
    initial: &quot;active&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}&gt;(definition: A.InferNarrowestObject&lt;{
    initial: &quot;active&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}&gt;): [state: ...]
import useStateMachine">useStateMachine</data-lsp></span><span style="color:#E1E4E8">({</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) initial: &quot;active&quot;">initial</data-lsp>: </span><span style="color:#9ECBFF">&#x27;active&#x27;</span><span style="color:#E1E4E8">,</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) states: A.InferNarrowestObject&lt;{
    inactive: {
        on: {
            TOGGLE: &quot;active&quot;;
        };
    };
    active: {
        on: {
            TOGGLE: &quot;inactive&quot;;
        };
    };
}&gt;">states</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) inactive: A.InferNarrowestObject&lt;{
    on: {
        TOGGLE: &quot;active&quot;;
    };
}&gt;">inactive</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">      <data-lsp lsp="(property) on: A.InferNarrowestObject&lt;{
    TOGGLE: &quot;active&quot;;
}&gt;">on</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">        <data-lsp lsp="(property) TOGGLE: &quot;active&quot;">TOGGLE</data-lsp>: </span><span style="color:#9ECBFF">&#x27;active&#x27;</span><span style="color:#E1E4E8">,</span></div><div class="line"><span style="color:#E1E4E8">      }</span></div><div class="line"><span style="color:#E1E4E8">    },</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) active: A.InferNarrowestObject&lt;{
    on: {
        TOGGLE: &quot;inactive&quot;;
    };
}&gt;">active</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">      <data-lsp lsp="(property) on: A.InferNarrowestObject&lt;{
    TOGGLE: &quot;inactive&quot;;
}&gt;">on</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">        <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot;">TOGGLE</data-lsp>: </span><span style="color:#9ECBFF">&#x27;inactive&#x27;</span><span style="color:#E1E4E8">,</span></div><div class="line"><span style="color:#E1E4E8">      }</span></div><div class="line"><span style="color:#E1E4E8">    },</span></div><div class="line"><span style="color:#E1E4E8">  }</span></div><div class="line"><span style="color:#E1E4E8">})</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>The event definition can also use the extended, object syntax, which allows for more control over the transition (like adding guards):</p><pre class="shiki min-light" style="background-color:#ffffff;color:#24292eff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#24292EFF">on: {</span></div><div class="line"><span style="color:#24292EFF">  TOGGLE: {</span></div><div class="line"><span style="color:#24292EFF">    target: </span><span style="color:#22863A">&#x27;active&#x27;</span><span style="color:#24292EFF">,</span></div><div class="line"><span style="color:#24292EFF">  },</span></div><div class="line"><span style="color:#24292EFF">};</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#B392F0">on</span><span style="color:#E1E4E8">: {</span></div><div class="line"><span style="color:#E1E4E8">  </span><span style="color:#B392F0">TOGGLE</span><span style="color:#E1E4E8">: {</span></div><div class="line"><span style="color:#E1E4E8">    </span><span style="color:#B392F0">target</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&#x27;active&#x27;</span><span style="color:#E1E4E8">,</span></div><div class="line"><span style="color:#E1E4E8">  },</span></div><div class="line"><span style="color:#E1E4E8">};</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="guards"></a>Guards<a class="hash-link" href="#guards" title="Direct link to heading">#</a></h4><p>Guards are functions that run before actually making the state transition: If the guard returns false the transition will be denied.</p><pre class="shiki min-light twoslash lsp" style="background-color:#ffffff;color:#24292eff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#D32F2F">const</span><span style="color:#24292EFF"> [</span><span style="color:#1976D2"><data-lsp lsp="const state: {
    value: &quot;inactive&quot;;
    context: undefined;
    event: Machine.EntryEventForStateValue&lt;{
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: {
                        target: &quot;active&quot;;
                        guard: unknown;
                    };
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
            };
        };
    }, &quot;inactive&quot;&gt;;
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    ...;
}">state</data-lsp></span><span style="color:#24292EFF">, </span><span style="color:#1976D2"><data-lsp lsp="const send: Machine.Send&lt;{
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: {
                    target: &quot;active&quot;;
                    guard: unknown;
                };
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}&gt;">send</data-lsp></span><span style="color:#24292EFF">] </span><span style="color:#D32F2F">=</span><span style="color:#24292EFF"> </span><span style="color:#6F42C1"><data-lsp lsp="(alias) useStateMachine&lt;Machine.Definition&lt;{
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: {
                    target: &quot;active&quot;;
                    guard: unknown;
                };
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}, {
    inactive: {
        on: {
            TOGGLE: {
                target: &quot;active&quot;;
                guard: unknown;
            };
        };
    };
    active: {
        ...;
    };
}, undefined, false&gt;&gt;(definition: A.InferNarrowestObject&lt;...&gt;): [state: ...]
import useStateMachine">useStateMachine</data-lsp></span><span style="color:#24292EFF">({</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) initial: &quot;inactive&quot; | &quot;active&quot;">initial</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;inactive&#x27;</span><span style="color:#24292EFF">,</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) states: A.InferNarrowestObject&lt;{
    inactive: Machine.Definition.StateNode&lt;{
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: {
                        target: &quot;active&quot;;
                        guard: unknown;
                    };
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
            };
        };
    }, [&quot;states&quot;, &quot;inactive&quot;]&gt;;
    active: Machine.Definition.StateNode&lt;...&gt;;
}&gt;">states</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) inactive: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: {
                    target: &quot;active&quot;;
                    guard: unknown;
                };
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}, [&quot;states&quot;, &quot;inactive&quot;]&gt;&gt;">inactive</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: {
                    target: &quot;active&quot;;
                    guard: unknown;
                };
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}, [&quot;states&quot;, &quot;inactive&quot;, &quot;on&quot;], {
    TOGGLE: {
        target: &quot;active&quot;;
        guard: unknown;
    };
}, {}, string&gt;&gt; | undefined">on</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">        <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot; | &quot;active&quot; | A.InferNarrowestObject&lt;{
    target: &quot;inactive&quot; | &quot;active&quot;;
    guard?: ((parameter: {
        context: undefined;
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">          <data-lsp lsp="(property) target: &quot;inactive&quot; | &quot;active&quot;">target</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;active&#x27;</span><span style="color:#24292EFF">,</span></div><div class="line"><span style="color:#24292EFF">          </span><span style="color:#6F42C1"><data-lsp lsp="(property) guard?: ((parameter: {
    context: undefined;
    event: {
        type: &quot;TOGGLE&quot;;
    };
}) =&gt; boolean) | undefined">guard</data-lsp></span><span style="color:#24292EFF">({ <data-lsp lsp="var context: undefined">context</data-lsp>, <data-lsp lsp="var event: {
    type: &quot;TOGGLE&quot;;
}">event</data-lsp> }) {</span></div><div class="line"><span style="color:#24292EFF">            </span><span style="color:#C2C3C5">// Return a boolean to allow or block the transition</span></div><div class="line"><span style="color:#24292EFF">            </span><span style="color:#D32F2F">return</span><span style="color:#24292EFF"> </span><span style="color:#1976D2">false</span><span style="color:#24292EFF">;</span></div><div class="line"><span style="color:#24292EFF">          },</span></div><div class="line"><span style="color:#24292EFF">        },</span></div><div class="line"><span style="color:#24292EFF">      },</span></div><div class="line"><span style="color:#24292EFF">    },</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) active: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: {
                    target: &quot;active&quot;;
                    guard: unknown;
                };
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}, [&quot;states&quot;, &quot;active&quot;]&gt;&gt;">active</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: {
                    target: &quot;active&quot;;
                    guard: unknown;
                };
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}, [&quot;states&quot;, &quot;active&quot;, &quot;on&quot;], {
    TOGGLE: &quot;inactive&quot;;
}, {}, string&gt;&gt; | undefined">on</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> { <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot; | &quot;active&quot; | A.InferNarrowestObject&lt;{
    target: &quot;inactive&quot; | &quot;active&quot;;
    guard?: ((parameter: {
        context: undefined;
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;inactive&#x27;</span><span style="color:#24292EFF"> },</span></div><div class="line"><span style="color:#24292EFF">    },</span></div><div class="line"><span style="color:#24292EFF">  },</span></div><div class="line"><span style="color:#24292EFF">});</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki github-dark twoslash lsp" style="background-color:#24292e;color:#e1e4e8"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#F97583">const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF"><data-lsp lsp="const state: {
    value: &quot;inactive&quot;;
    context: undefined;
    event: Machine.EntryEventForStateValue&lt;{
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: {
                        target: &quot;active&quot;;
                        guard: unknown;
                    };
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
            };
        };
    }, &quot;inactive&quot;&gt;;
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    ...;
}">state</data-lsp></span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF"><data-lsp lsp="const send: Machine.Send&lt;{
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: {
                    target: &quot;active&quot;;
                    guard: unknown;
                };
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}&gt;">send</data-lsp></span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0"><data-lsp lsp="(alias) useStateMachine&lt;Machine.Definition&lt;{
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: {
                    target: &quot;active&quot;;
                    guard: unknown;
                };
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}, {
    inactive: {
        on: {
            TOGGLE: {
                target: &quot;active&quot;;
                guard: unknown;
            };
        };
    };
    active: {
        ...;
    };
}, undefined, false&gt;&gt;(definition: A.InferNarrowestObject&lt;...&gt;): [state: ...]
import useStateMachine">useStateMachine</data-lsp></span><span style="color:#E1E4E8">({</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) initial: &quot;inactive&quot; | &quot;active&quot;">initial</data-lsp>: </span><span style="color:#9ECBFF">&#x27;inactive&#x27;</span><span style="color:#E1E4E8">,</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) states: A.InferNarrowestObject&lt;{
    inactive: Machine.Definition.StateNode&lt;{
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: {
                        target: &quot;active&quot;;
                        guard: unknown;
                    };
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
            };
        };
    }, [&quot;states&quot;, &quot;inactive&quot;]&gt;;
    active: Machine.Definition.StateNode&lt;...&gt;;
}&gt;">states</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) inactive: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: {
                    target: &quot;active&quot;;
                    guard: unknown;
                };
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}, [&quot;states&quot;, &quot;inactive&quot;]&gt;&gt;">inactive</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: {
                    target: &quot;active&quot;;
                    guard: unknown;
                };
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}, [&quot;states&quot;, &quot;inactive&quot;, &quot;on&quot;], {
    TOGGLE: {
        target: &quot;active&quot;;
        guard: unknown;
    };
}, {}, string&gt;&gt; | undefined">on</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">        <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot; | &quot;active&quot; | A.InferNarrowestObject&lt;{
    target: &quot;inactive&quot; | &quot;active&quot;;
    guard?: ((parameter: {
        context: undefined;
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">          <data-lsp lsp="(property) target: &quot;inactive&quot; | &quot;active&quot;">target</data-lsp>: </span><span style="color:#9ECBFF">&#x27;active&#x27;</span><span style="color:#E1E4E8">,</span></div><div class="line"><span style="color:#E1E4E8">          </span><span style="color:#B392F0"><data-lsp lsp="(property) guard?: ((parameter: {
    context: undefined;
    event: {
        type: &quot;TOGGLE&quot;;
    };
}) =&gt; boolean) | undefined">guard</data-lsp></span><span style="color:#E1E4E8">({ </span><span style="color:#FFAB70"><data-lsp lsp="var context: undefined">context</data-lsp></span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70"><data-lsp lsp="var event: {
    type: &quot;TOGGLE&quot;;
}">event</data-lsp></span><span style="color:#E1E4E8"> }) {</span></div><div class="line"><span style="color:#E1E4E8">            </span><span style="color:#6A737D">// Return a boolean to allow or block the transition</span></div><div class="line"><span style="color:#E1E4E8">            </span><span style="color:#F97583">return</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">;</span></div><div class="line"><span style="color:#E1E4E8">          },</span></div><div class="line"><span style="color:#E1E4E8">        },</span></div><div class="line"><span style="color:#E1E4E8">      },</span></div><div class="line"><span style="color:#E1E4E8">    },</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) active: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: {
                    target: &quot;active&quot;;
                    guard: unknown;
                };
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}, [&quot;states&quot;, &quot;active&quot;]&gt;&gt;">active</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: {
                    target: &quot;active&quot;;
                    guard: unknown;
                };
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
        };
    };
}, [&quot;states&quot;, &quot;active&quot;, &quot;on&quot;], {
    TOGGLE: &quot;inactive&quot;;
}, {}, string&gt;&gt; | undefined">on</data-lsp>: { <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot; | &quot;active&quot; | A.InferNarrowestObject&lt;{
    target: &quot;inactive&quot; | &quot;active&quot;;
    guard?: ((parameter: {
        context: undefined;
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp>: </span><span style="color:#9ECBFF">&#x27;inactive&#x27;</span><span style="color:#E1E4E8"> },</span></div><div class="line"><span style="color:#E1E4E8">    },</span></div><div class="line"><span style="color:#E1E4E8">  },</span></div><div class="line"><span style="color:#E1E4E8">});</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>The guard function receives an object with the current context and the event. The event parameter always uses the object format (e.g. <code>{ type: &#x27;TOGGLE&#x27; }</code>).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="effects-entryexit-callbacks"></a>Effects (entry/exit callbacks)<a class="hash-link" href="#effects-entryexit-callbacks" title="Direct link to heading">#</a></h3><p>Effects are triggered when the state machine enters a given state. If you return a function from your effect, it will be invoked when leaving that state (similarly to how useEffect works in React).</p><pre class="shiki min-light twoslash lsp" style="background-color:#ffffff;color:#24292eff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#D32F2F">const</span><span style="color:#24292EFF"> [</span><span style="color:#1976D2"><data-lsp lsp="const state: {
    value: &quot;active&quot;;
    context: undefined;
    event: {
        type: &quot;$$initial&quot;;
    };
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    value: &quot;inactive&quot;;
    context: undefined;
    event: {
        type: &quot;TOGGLE&quot;;
    };
    nextEventsT: never[];
    nextEvents: &quot;TOGGLE&quot;[];
}">state</data-lsp></span><span style="color:#24292EFF">, </span><span style="color:#1976D2"><data-lsp lsp="const send: Machine.Send&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}&gt;">send</data-lsp></span><span style="color:#24292EFF">] </span><span style="color:#D32F2F">=</span><span style="color:#24292EFF"> </span><span style="color:#6F42C1"><data-lsp lsp="(alias) useStateMachine&lt;Machine.Definition&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}, {
    active: {
        on: {
            TOGGLE: &quot;inactive&quot;;
        };
        effect: unknown;
    };
    inactive: {};
}, undefined, false&gt;&gt;(definition: A.InferNarrowestObject&lt;...&gt;): [state: ...]
import useStateMachine">useStateMachine</data-lsp></span><span style="color:#24292EFF">({</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) initial: &quot;active&quot; | &quot;inactive&quot;">initial</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;active&#x27;</span><span style="color:#24292EFF">,</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) states: A.InferNarrowestObject&lt;{
    active: Machine.Definition.StateNode&lt;{
        initial: &quot;active&quot;;
        states: {
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
                effect: unknown;
            };
            inactive: {};
        };
    }, [&quot;states&quot;, &quot;active&quot;]&gt;;
    inactive: Machine.Definition.StateNode&lt;{
        initial: &quot;active&quot;;
        states: {
            ...;
        };
    }, [...]&gt;;
}&gt;">states</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) active: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}, [&quot;states&quot;, &quot;active&quot;]&gt;&gt;">active</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}, [&quot;states&quot;, &quot;active&quot;, &quot;on&quot;], {
    TOGGLE: &quot;inactive&quot;;
}, {}, string&gt;&gt; | undefined">on</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> { <data-lsp lsp="(property) TOGGLE: &quot;active&quot; | &quot;inactive&quot; | A.InferNarrowestObject&lt;{
    target: &quot;active&quot; | &quot;inactive&quot;;
    guard?: ((parameter: {
        context: undefined;
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;inactive&#x27;</span><span style="color:#24292EFF"> },</span></div><div class="line"><span style="color:#24292EFF">      </span><span style="color:#6F42C1"><data-lsp lsp="(property) effect?: Machine.Definition.Effect&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}, [&quot;states&quot;, &quot;active&quot;, &quot;effect&quot;], &quot;active&quot;&gt; | undefined">effect</data-lsp></span><span style="color:#24292EFF">({ <data-lsp lsp="var send: Machine.Send&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}&gt;">send</data-lsp>, <data-lsp lsp="var setContext: Machine.SetContext&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}&gt;">setContext</data-lsp>, <data-lsp lsp="var event: {
    type: &quot;$$initial&quot;;
}">event</data-lsp>, <data-lsp lsp="var context: undefined">context</data-lsp> }) {</span></div><div class="line"><span style="color:#24292EFF">        </span><span style="color:#1976D2"><data-lsp lsp="var console: Console">console</data-lsp></span><span style="color:#6F42C1">.<data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#24292EFF">(</span><span style="color:#22863A">&#x27;Just entered the Active state&#x27;</span><span style="color:#24292EFF">);</span></div><div class="line"><span style="color:#24292EFF">        </span><span style="color:#D32F2F">return</span><span style="color:#24292EFF"> () </span><span style="color:#D32F2F">=&gt;</span><span style="color:#24292EFF"> </span><span style="color:#1976D2"><data-lsp lsp="var console: Console">console</data-lsp></span><span style="color:#6F42C1">.<data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#24292EFF">(</span><span style="color:#22863A">&#x27;Just Left the Active state&#x27;</span><span style="color:#24292EFF">);</span></div><div class="line"><span style="color:#24292EFF">      },</span></div><div class="line"><span style="color:#24292EFF">    },</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) inactive: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}, [&quot;states&quot;, &quot;inactive&quot;]&gt;&gt;">inactive</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {},</span></div><div class="line"><span style="color:#24292EFF">  },</span></div><div class="line"><span style="color:#24292EFF">});</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki github-dark twoslash lsp" style="background-color:#24292e;color:#e1e4e8"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#F97583">const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF"><data-lsp lsp="const state: {
    value: &quot;active&quot;;
    context: undefined;
    event: {
        type: &quot;$$initial&quot;;
    };
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    value: &quot;inactive&quot;;
    context: undefined;
    event: {
        type: &quot;TOGGLE&quot;;
    };
    nextEventsT: never[];
    nextEvents: &quot;TOGGLE&quot;[];
}">state</data-lsp></span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF"><data-lsp lsp="const send: Machine.Send&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}&gt;">send</data-lsp></span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0"><data-lsp lsp="(alias) useStateMachine&lt;Machine.Definition&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}, {
    active: {
        on: {
            TOGGLE: &quot;inactive&quot;;
        };
        effect: unknown;
    };
    inactive: {};
}, undefined, false&gt;&gt;(definition: A.InferNarrowestObject&lt;...&gt;): [state: ...]
import useStateMachine">useStateMachine</data-lsp></span><span style="color:#E1E4E8">({</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) initial: &quot;active&quot; | &quot;inactive&quot;">initial</data-lsp>: </span><span style="color:#9ECBFF">&#x27;active&#x27;</span><span style="color:#E1E4E8">,</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) states: A.InferNarrowestObject&lt;{
    active: Machine.Definition.StateNode&lt;{
        initial: &quot;active&quot;;
        states: {
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
                effect: unknown;
            };
            inactive: {};
        };
    }, [&quot;states&quot;, &quot;active&quot;]&gt;;
    inactive: Machine.Definition.StateNode&lt;{
        initial: &quot;active&quot;;
        states: {
            ...;
        };
    }, [...]&gt;;
}&gt;">states</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) active: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}, [&quot;states&quot;, &quot;active&quot;]&gt;&gt;">active</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}, [&quot;states&quot;, &quot;active&quot;, &quot;on&quot;], {
    TOGGLE: &quot;inactive&quot;;
}, {}, string&gt;&gt; | undefined">on</data-lsp>: { <data-lsp lsp="(property) TOGGLE: &quot;active&quot; | &quot;inactive&quot; | A.InferNarrowestObject&lt;{
    target: &quot;active&quot; | &quot;inactive&quot;;
    guard?: ((parameter: {
        context: undefined;
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp>: </span><span style="color:#9ECBFF">&#x27;inactive&#x27;</span><span style="color:#E1E4E8"> },</span></div><div class="line"><span style="color:#E1E4E8">      </span><span style="color:#B392F0"><data-lsp lsp="(property) effect?: Machine.Definition.Effect&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}, [&quot;states&quot;, &quot;active&quot;, &quot;effect&quot;], &quot;active&quot;&gt; | undefined">effect</data-lsp></span><span style="color:#E1E4E8">({ </span><span style="color:#FFAB70"><data-lsp lsp="var send: Machine.Send&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}&gt;">send</data-lsp></span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70"><data-lsp lsp="var setContext: Machine.SetContext&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}&gt;">setContext</data-lsp></span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70"><data-lsp lsp="var event: {
    type: &quot;$$initial&quot;;
}">event</data-lsp></span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70"><data-lsp lsp="var context: undefined">context</data-lsp></span><span style="color:#E1E4E8"> }) {</span></div><div class="line"><span style="color:#E1E4E8">        <data-lsp lsp="var console: Console">console</data-lsp>.</span><span style="color:#B392F0"><data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#x27;Just entered the Active state&#x27;</span><span style="color:#E1E4E8">);</span></div><div class="line"><span style="color:#E1E4E8">        </span><span style="color:#F97583">return</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> <data-lsp lsp="var console: Console">console</data-lsp>.</span><span style="color:#B392F0"><data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#x27;Just Left the Active state&#x27;</span><span style="color:#E1E4E8">);</span></div><div class="line"><span style="color:#E1E4E8">      },</span></div><div class="line"><span style="color:#E1E4E8">    },</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) inactive: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    initial: &quot;active&quot;;
    states: {
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
        inactive: {};
    };
}, [&quot;states&quot;, &quot;inactive&quot;]&gt;&gt;">inactive</data-lsp>: {},</span></div><div class="line"><span style="color:#E1E4E8">  },</span></div><div class="line"><span style="color:#E1E4E8">});</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>The effect function receives an object as parameter with four keys:</p><ul><li><code>send</code>: Takes an event as argument, provided in shorthand string format (e.g. &quot;TOGGLE&quot;) or as an event object (e.g. <code>{ type: &quot;TOGGLE&quot; }</code>)</li><li><code>setContext</code>: Takes an updater function as parameter to set a new context (more on context below). Returns an object with <code>send</code>, so you can set the context and send an event on a single line.</li><li><code>event</code>: The event that triggered a transition to this state. (The event parameter always uses the object format (e.g. <code>{ type: &#x27;TOGGLE&#x27; }</code>).).</li><li><code>context</code> The context at the time the effect runs.</li></ul><p>In this example, the state machine will always send the &quot;RETRY&quot; event when entering the error state:</p><pre class="shiki min-light" style="background-color:#ffffff;color:#24292eff"><div class="language-id">typescript</div><div class="code-container"><code><div class="line"><span style="color:#D32F2F">const</span><span style="color:#24292EFF"> [</span><span style="color:#1976D2">state</span><span style="color:#24292EFF">, </span><span style="color:#1976D2">send</span><span style="color:#24292EFF">] </span><span style="color:#D32F2F">=</span><span style="color:#24292EFF"> </span><span style="color:#6F42C1">useStateMachine</span><span style="color:#24292EFF">({</span></div><div class="line"><span style="color:#24292EFF">  initial</span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;loading&#x27;</span><span style="color:#24292EFF">,</span></div><div class="line"><span style="color:#24292EFF">  states</span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">    </span><span style="color:#C2C3C5">/* Other states here... */</span></div><div class="line"><span style="color:#24292EFF">    error</span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">      on</span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">        RETRY</span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;load&#x27;</span><span style="color:#24292EFF">,</span></div><div class="line"><span style="color:#24292EFF">      },</span></div><div class="line"><span style="color:#24292EFF">      </span><span style="color:#6F42C1">effect</span><span style="color:#24292EFF">({ send }) {</span></div><div class="line"><span style="color:#24292EFF">        </span><span style="color:#6F42C1">send</span><span style="color:#24292EFF">(</span><span style="color:#22863A">&#x27;RETRY&#x27;</span><span style="color:#24292EFF">);</span></div><div class="line"><span style="color:#24292EFF">      },</span></div><div class="line"><span style="color:#24292EFF">    },</span></div><div class="line"><span style="color:#24292EFF">  },</span></div><div class="line"><span style="color:#24292EFF">});</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8"><div class="language-id">typescript</div><div class="code-container"><code><div class="line"><span style="color:#F97583">const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">state</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">send</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0">useStateMachine</span><span style="color:#E1E4E8">({</span></div><div class="line"><span style="color:#E1E4E8">  initial: </span><span style="color:#9ECBFF">&#x27;loading&#x27;</span><span style="color:#E1E4E8">,</span></div><div class="line"><span style="color:#E1E4E8">  states: {</span></div><div class="line"><span style="color:#E1E4E8">    </span><span style="color:#6A737D">/* Other states here... */</span></div><div class="line"><span style="color:#E1E4E8">    error: {</span></div><div class="line"><span style="color:#E1E4E8">      on: {</span></div><div class="line"><span style="color:#E1E4E8">        RETRY: </span><span style="color:#9ECBFF">&#x27;load&#x27;</span><span style="color:#E1E4E8">,</span></div><div class="line"><span style="color:#E1E4E8">      },</span></div><div class="line"><span style="color:#E1E4E8">      </span><span style="color:#B392F0">effect</span><span style="color:#E1E4E8">({ </span><span style="color:#FFAB70">send</span><span style="color:#E1E4E8"> }) {</span></div><div class="line"><span style="color:#E1E4E8">        </span><span style="color:#B392F0">send</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#x27;RETRY&#x27;</span><span style="color:#E1E4E8">);</span></div><div class="line"><span style="color:#E1E4E8">      },</span></div><div class="line"><span style="color:#E1E4E8">    },</span></div><div class="line"><span style="color:#E1E4E8">  },</span></div><div class="line"><span style="color:#E1E4E8">});</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="extended-state-context"></a>Extended state (context)<a class="hash-link" href="#extended-state-context" title="Direct link to heading">#</a></h2><p>Besides the finite number of states, the state machine can have extended state (known as context).</p><p>You can provide the initial context value in the state machine definition, then use the <code>setContext</code> function within your effects to change the context:</p><pre class="shiki min-light twoslash lsp" style="background-color:#ffffff;color:#24292eff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#D32F2F">const</span><span style="color:#24292EFF"> [</span><span style="color:#1976D2"><data-lsp lsp="const state: {
    value: &quot;inactive&quot;;
    context: {
        toggleCount: number;
    };
    event: Machine.EntryEventForStateValue&lt;{
        context: {
            toggleCount: number;
        };
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
                effect: unknown;
            };
        };
    }, &quot;inactive&quot;&gt;;
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    ...;
}">state</data-lsp></span><span style="color:#24292EFF">, </span><span style="color:#1976D2"><data-lsp lsp="const send: Machine.Send&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}&gt;">send</data-lsp></span><span style="color:#24292EFF">] </span><span style="color:#D32F2F">=</span><span style="color:#24292EFF"> </span><span style="color:#6F42C1"><data-lsp lsp="(alias) useStateMachine&lt;Machine.Definition&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, {
    inactive: {
        on: {
            TOGGLE: &quot;active&quot;;
        };
    };
    active: {
        ...;
    };
}, undefined, false&gt;&gt;(definition: A.InferNarrowestObject&lt;...&gt;): [state: ...]
import useStateMachine">useStateMachine</data-lsp></span><span style="color:#24292EFF">({</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) context?: unknown">context</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> { <data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#1976D2">0</span><span style="color:#24292EFF"> },</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) initial: &quot;inactive&quot; | &quot;active&quot;">initial</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;inactive&#x27;</span><span style="color:#24292EFF">,</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) states: A.InferNarrowestObject&lt;{
    inactive: Machine.Definition.StateNode&lt;{
        context: {
            toggleCount: number;
        };
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
                effect: unknown;
            };
        };
    }, [&quot;states&quot;, &quot;inactive&quot;]&gt;;
    active: Machine.Definition.StateNode&lt;...&gt;;
}&gt;">states</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) inactive: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [&quot;states&quot;, &quot;inactive&quot;]&gt;&gt;">inactive</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [&quot;states&quot;, &quot;inactive&quot;, &quot;on&quot;], {
    ...;
}, {}, string&gt;&gt; | undefined">on</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> { <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot; | &quot;active&quot; | A.InferNarrowestObject&lt;{
    target: &quot;inactive&quot; | &quot;active&quot;;
    guard?: ((parameter: {
        context: {
            toggleCount: number;
        };
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;active&#x27;</span><span style="color:#24292EFF"> },</span></div><div class="line"><span style="color:#24292EFF">    },</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) active: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [&quot;states&quot;, &quot;active&quot;]&gt;&gt;">active</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [&quot;states&quot;, &quot;active&quot;, &quot;on&quot;], {
    ...;
}, {}, string&gt;&gt; | undefined">on</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> { <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot; | &quot;active&quot; | A.InferNarrowestObject&lt;{
    target: &quot;inactive&quot; | &quot;active&quot;;
    guard?: ((parameter: {
        context: {
            toggleCount: number;
        };
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;inactive&#x27;</span><span style="color:#24292EFF"> },</span></div><div class="line"><span style="color:#24292EFF">      </span><span style="color:#6F42C1"><data-lsp lsp="(property) effect?: Machine.Definition.Effect&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [&quot;states&quot;, &quot;active&quot;, &quot;effect&quot;], &quot;active&quot;&gt; | undefined">effect</data-lsp></span><span style="color:#24292EFF">({ <data-lsp lsp="var setContext: Machine.SetContext&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}&gt;">setContext</data-lsp> }) {</span></div><div class="line"><span style="color:#24292EFF">        </span><span style="color:#6F42C1"><data-lsp lsp="var setContext: (contextUpdater: Machine.ContextUpdater&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}&gt;) =&gt; {
    ...;
}">setContext</data-lsp></span><span style="color:#24292EFF">(<data-lsp lsp="(parameter) context: {
    toggleCount: number;
}">context</data-lsp> </span><span style="color:#D32F2F">=&gt;</span><span style="color:#24292EFF"> ({ <data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#1976D2"><data-lsp lsp="(parameter) context: {
    toggleCount: number;
}">context</data-lsp></span><span style="color:#24292EFF">.<data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp> </span><span style="color:#D32F2F">+</span><span style="color:#24292EFF"> </span><span style="color:#1976D2">1</span><span style="color:#24292EFF"> }));</span></div><div class="line"><span style="color:#24292EFF">      },</span></div><div class="line"><span style="color:#24292EFF">    },</span></div><div class="line"><span style="color:#24292EFF">  },</span></div><div class="line"><span style="color:#24292EFF">});</span></div><div class="line">Â </div><div class="line"><span style="color:#1976D2"><data-lsp lsp="var console: Console">console</data-lsp></span><span style="color:#6F42C1">.<data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#24292EFF">(<data-lsp lsp="const state: {
    value: &quot;inactive&quot;;
    context: {
        toggleCount: number;
    };
    event: Machine.EntryEventForStateValue&lt;{
        context: {
            toggleCount: number;
        };
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
                effect: unknown;
            };
        };
    }, &quot;inactive&quot;&gt;;
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    ...;
}">state</data-lsp>); </span><span style="color:#C2C3C5">// { context: { toggleCount: 0 }, value: &#x27;inactive&#x27;, nextEvents: [&#x27;TOGGLE&#x27;] }</span></div><div class="line">Â </div><div class="line"><span style="color:#6F42C1"><data-lsp lsp="const send: (sendable: &quot;TOGGLE&quot;) =&gt; void (+1 overload)">send</data-lsp></span><span style="color:#24292EFF">(</span><span style="color:#22863A">&#x27;TOGGLE&#x27;</span><span style="color:#24292EFF">);</span></div><div class="line">Â </div><div class="line"><span style="color:#1976D2"><data-lsp lsp="var console: Console">console</data-lsp></span><span style="color:#6F42C1">.<data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#24292EFF">(<data-lsp lsp="const state: {
    value: &quot;inactive&quot;;
    context: {
        toggleCount: number;
    };
    event: Machine.EntryEventForStateValue&lt;{
        context: {
            toggleCount: number;
        };
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
                effect: unknown;
            };
        };
    }, &quot;inactive&quot;&gt;;
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    ...;
}">state</data-lsp>); </span><span style="color:#C2C3C5">// { context: { toggleCount: 1 }, value: &#x27;active&#x27;, nextEvents: [&#x27;TOGGLE&#x27;] }</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki github-dark twoslash lsp" style="background-color:#24292e;color:#e1e4e8"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#F97583">const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF"><data-lsp lsp="const state: {
    value: &quot;inactive&quot;;
    context: {
        toggleCount: number;
    };
    event: Machine.EntryEventForStateValue&lt;{
        context: {
            toggleCount: number;
        };
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
                effect: unknown;
            };
        };
    }, &quot;inactive&quot;&gt;;
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    ...;
}">state</data-lsp></span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF"><data-lsp lsp="const send: Machine.Send&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}&gt;">send</data-lsp></span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0"><data-lsp lsp="(alias) useStateMachine&lt;Machine.Definition&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, {
    inactive: {
        on: {
            TOGGLE: &quot;active&quot;;
        };
    };
    active: {
        ...;
    };
}, undefined, false&gt;&gt;(definition: A.InferNarrowestObject&lt;...&gt;): [state: ...]
import useStateMachine">useStateMachine</data-lsp></span><span style="color:#E1E4E8">({</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) context?: unknown">context</data-lsp>: { <data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp>: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8"> },</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) initial: &quot;inactive&quot; | &quot;active&quot;">initial</data-lsp>: </span><span style="color:#9ECBFF">&#x27;inactive&#x27;</span><span style="color:#E1E4E8">,</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) states: A.InferNarrowestObject&lt;{
    inactive: Machine.Definition.StateNode&lt;{
        context: {
            toggleCount: number;
        };
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
                effect: unknown;
            };
        };
    }, [&quot;states&quot;, &quot;inactive&quot;]&gt;;
    active: Machine.Definition.StateNode&lt;...&gt;;
}&gt;">states</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) inactive: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [&quot;states&quot;, &quot;inactive&quot;]&gt;&gt;">inactive</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [&quot;states&quot;, &quot;inactive&quot;, &quot;on&quot;], {
    ...;
}, {}, string&gt;&gt; | undefined">on</data-lsp>: { <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot; | &quot;active&quot; | A.InferNarrowestObject&lt;{
    target: &quot;inactive&quot; | &quot;active&quot;;
    guard?: ((parameter: {
        context: {
            toggleCount: number;
        };
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp>: </span><span style="color:#9ECBFF">&#x27;active&#x27;</span><span style="color:#E1E4E8"> },</span></div><div class="line"><span style="color:#E1E4E8">    },</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) active: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [&quot;states&quot;, &quot;active&quot;]&gt;&gt;">active</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [&quot;states&quot;, &quot;active&quot;, &quot;on&quot;], {
    ...;
}, {}, string&gt;&gt; | undefined">on</data-lsp>: { <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot; | &quot;active&quot; | A.InferNarrowestObject&lt;{
    target: &quot;inactive&quot; | &quot;active&quot;;
    guard?: ((parameter: {
        context: {
            toggleCount: number;
        };
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp>: </span><span style="color:#9ECBFF">&#x27;inactive&#x27;</span><span style="color:#E1E4E8"> },</span></div><div class="line"><span style="color:#E1E4E8">      </span><span style="color:#B392F0"><data-lsp lsp="(property) effect?: Machine.Definition.Effect&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [&quot;states&quot;, &quot;active&quot;, &quot;effect&quot;], &quot;active&quot;&gt; | undefined">effect</data-lsp></span><span style="color:#E1E4E8">({ </span><span style="color:#FFAB70"><data-lsp lsp="var setContext: Machine.SetContext&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}&gt;">setContext</data-lsp></span><span style="color:#E1E4E8"> }) {</span></div><div class="line"><span style="color:#E1E4E8">        </span><span style="color:#B392F0"><data-lsp lsp="var setContext: (contextUpdater: Machine.ContextUpdater&lt;{
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}&gt;) =&gt; {
    ...;
}">setContext</data-lsp></span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70"><data-lsp lsp="(parameter) context: {
    toggleCount: number;
}">context</data-lsp></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> ({ <data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp>: <data-lsp lsp="(parameter) context: {
    toggleCount: number;
}">context</data-lsp>.<data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp> </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8"> }));</span></div><div class="line"><span style="color:#E1E4E8">      },</span></div><div class="line"><span style="color:#E1E4E8">    },</span></div><div class="line"><span style="color:#E1E4E8">  },</span></div><div class="line"><span style="color:#E1E4E8">});</span></div><div class="line">Â </div><div class="line"><span style="color:#E1E4E8"><data-lsp lsp="var console: Console">console</data-lsp>.</span><span style="color:#B392F0"><data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#E1E4E8">(<data-lsp lsp="const state: {
    value: &quot;inactive&quot;;
    context: {
        toggleCount: number;
    };
    event: Machine.EntryEventForStateValue&lt;{
        context: {
            toggleCount: number;
        };
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
                effect: unknown;
            };
        };
    }, &quot;inactive&quot;&gt;;
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    ...;
}">state</data-lsp>); </span><span style="color:#6A737D">// { context: { toggleCount: 0 }, value: &#x27;inactive&#x27;, nextEvents: [&#x27;TOGGLE&#x27;] }</span></div><div class="line">Â </div><div class="line"><span style="color:#B392F0"><data-lsp lsp="const send: (sendable: &quot;TOGGLE&quot;) =&gt; void (+1 overload)">send</data-lsp></span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#x27;TOGGLE&#x27;</span><span style="color:#E1E4E8">);</span></div><div class="line">Â </div><div class="line"><span style="color:#E1E4E8"><data-lsp lsp="var console: Console">console</data-lsp>.</span><span style="color:#B392F0"><data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#E1E4E8">(<data-lsp lsp="const state: {
    value: &quot;inactive&quot;;
    context: {
        toggleCount: number;
    };
    event: Machine.EntryEventForStateValue&lt;{
        context: {
            toggleCount: number;
        };
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
                effect: unknown;
            };
        };
    }, &quot;inactive&quot;&gt;;
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    ...;
}">state</data-lsp>); </span><span style="color:#6A737D">// { context: { toggleCount: 1 }, value: &#x27;active&#x27;, nextEvents: [&#x27;TOGGLE&#x27;] }</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="schema-context--event-typing"></a>Schema: Context &amp; Event Typing<a class="hash-link" href="#schema-context--event-typing" title="Direct link to heading">#</a></h2><p>TypeScript will automatically infer your context type; event types are generated automatically.</p><p>Still, there are situations where you might want explicit control over the <code>context</code> and <code>event</code> types: You can provide you own typing using the <code>t</code> whithin <code>schema</code>:</p><p><em>Typed Context example</em></p><pre class="shiki min-light twoslash lsp" style="background-color:#ffffff;color:#24292eff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#D32F2F">import</span><span style="color:#24292EFF"> <data-lsp lsp="(alias) const useStateMachine: UseStateMachine
import useStateMachine">useStateMachine</data-lsp>, {<data-lsp lsp="(alias) const t: &lt;T extends unknown&gt;() =&gt; {
    [$$t]: T;
}
import t">t</data-lsp>} </span><span style="color:#D32F2F">from</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;@cassiozen/usestatemachine&#x27;</span><span style="color:#24292EFF">;</span></div><div class="line">Â </div><div class="line"><span style="color:#D32F2F">const</span><span style="color:#24292EFF"> [</span><span style="color:#1976D2"><data-lsp lsp="const state: {
    value: &quot;inactive&quot;;
    context: {
        toggleCount: number;
    };
    event: Machine.EntryEventForStateValue&lt;{
        schema: {
            context: {
                [$$t]: {
                    toggleCount: number;
                };
            };
        };
        context: {
            toggleCount: number;
        };
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                ...;
            };
        };
    }, &quot;inactive&quot;&gt;;
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    ...;
}">state</data-lsp></span><span style="color:#24292EFF">, </span><span style="color:#1976D2"><data-lsp lsp="const send: Machine.Send&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}&gt;">send</data-lsp></span><span style="color:#24292EFF">] </span><span style="color:#D32F2F">=</span><span style="color:#24292EFF"> </span><span style="color:#6F42C1"><data-lsp lsp="(alias) useStateMachine&lt;Machine.Definition&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, {
    ...;
}, {
    ...;
}, true&gt;&gt;(definition: A.InferNarrowestObject&lt;...&gt;): [state: ...]
import useStateMachine">useStateMachine</data-lsp></span><span style="color:#24292EFF">({</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) schema?: A.InferNarrowestObject&lt;Machine.Definition.Schema&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [...], {
    ...;
}, {
    ...;
}, undefined&gt;&gt; | undefined">schema</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) context?: A.InferNarrowestObject&lt;{
    [$$t]: {
        toggleCount: number;
    };
}&gt; | undefined">context</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#6F42C1"><data-lsp lsp="(alias) t&lt;{
    toggleCount: number;
}&gt;(): {
    [$$t]: {
        toggleCount: number;
    };
}
import t">t</data-lsp></span><span style="color:#24292EFF">&lt;{ <data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#1976D2">number</span><span style="color:#24292EFF"> }&gt;()</span></div><div class="line"><span style="color:#24292EFF">  },</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) context: A.InferNarrowestObject&lt;{
    toggleCount: number;
}&gt;">context</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> { <data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#1976D2">0</span><span style="color:#24292EFF"> },</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) initial: &quot;inactive&quot; | &quot;active&quot;">initial</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;inactive&#x27;</span><span style="color:#24292EFF">,</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) states: A.InferNarrowestObject&lt;{
    inactive: Machine.Definition.StateNode&lt;{
        schema: {
            context: {
                [$$t]: {
                    toggleCount: number;
                };
            };
        };
        context: {
            toggleCount: number;
        };
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
                effect: unknown;
            };
        };
    }, [...]&gt;;
    active: Machine.Definition.StateNode&lt;...&gt;;
}&gt;">states</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) inactive: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [...]&gt;&gt;">inactive</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [...], {
    ...;
}, {}, string&gt;&gt; | undefined">on</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> { <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot; | &quot;active&quot; | A.InferNarrowestObject&lt;{
    target: &quot;inactive&quot; | &quot;active&quot;;
    guard?: ((parameter: {
        context: {
            toggleCount: number;
        };
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;active&#x27;</span><span style="color:#24292EFF"> },</span></div><div class="line"><span style="color:#24292EFF">    },</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) active: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [...]&gt;&gt;">active</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [...], {
    ...;
}, {}, string&gt;&gt; | undefined">on</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> { <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot; | &quot;active&quot; | A.InferNarrowestObject&lt;{
    target: &quot;inactive&quot; | &quot;active&quot;;
    guard?: ((parameter: {
        context: {
            toggleCount: number;
        };
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;inactive&#x27;</span><span style="color:#24292EFF"> },</span></div><div class="line"><span style="color:#24292EFF">      </span><span style="color:#6F42C1"><data-lsp lsp="(property) effect?: Machine.Definition.Effect&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [...], &quot;active&quot;&gt; | undefined">effect</data-lsp></span><span style="color:#24292EFF">({ <data-lsp lsp="var setContext: Machine.SetContext&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}&gt;">setContext</data-lsp> }) {</span></div><div class="line"><span style="color:#24292EFF">        </span><span style="color:#6F42C1"><data-lsp lsp="var setContext: (contextUpdater: Machine.ContextUpdater&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}&gt;) =&gt; {
    ...;
}">setContext</data-lsp></span><span style="color:#24292EFF">(<data-lsp lsp="(parameter) context: {
    toggleCount: number;
}">context</data-lsp> </span><span style="color:#D32F2F">=&gt;</span><span style="color:#24292EFF"> ({ <data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#1976D2"><data-lsp lsp="(parameter) context: {
    toggleCount: number;
}">context</data-lsp></span><span style="color:#24292EFF">.<data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp> </span><span style="color:#D32F2F">+</span><span style="color:#24292EFF"> </span><span style="color:#1976D2">1</span><span style="color:#24292EFF"> }));</span></div><div class="line"><span style="color:#24292EFF">      },</span></div><div class="line"><span style="color:#24292EFF">    },</span></div><div class="line"><span style="color:#24292EFF">  },</span></div><div class="line"><span style="color:#24292EFF">});</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki github-dark twoslash lsp" style="background-color:#24292e;color:#e1e4e8"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> <data-lsp lsp="(alias) const useStateMachine: UseStateMachine
import useStateMachine">useStateMachine</data-lsp>, {<data-lsp lsp="(alias) const t: &lt;T extends unknown&gt;() =&gt; {
    [$$t]: T;
}
import t">t</data-lsp>} </span><span style="color:#F97583">from</span><span style="color:#E1E4E8"> </span><span style="color:#9ECBFF">&#x27;@cassiozen/usestatemachine&#x27;</span><span style="color:#E1E4E8">;</span></div><div class="line">Â </div><div class="line"><span style="color:#F97583">const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF"><data-lsp lsp="const state: {
    value: &quot;inactive&quot;;
    context: {
        toggleCount: number;
    };
    event: Machine.EntryEventForStateValue&lt;{
        schema: {
            context: {
                [$$t]: {
                    toggleCount: number;
                };
            };
        };
        context: {
            toggleCount: number;
        };
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                ...;
            };
        };
    }, &quot;inactive&quot;&gt;;
    nextEventsT: &quot;TOGGLE&quot;[];
    nextEvents: &quot;TOGGLE&quot;[];
} | {
    ...;
}">state</data-lsp></span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF"><data-lsp lsp="const send: Machine.Send&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}&gt;">send</data-lsp></span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0"><data-lsp lsp="(alias) useStateMachine&lt;Machine.Definition&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, {
    ...;
}, {
    ...;
}, true&gt;&gt;(definition: A.InferNarrowestObject&lt;...&gt;): [state: ...]
import useStateMachine">useStateMachine</data-lsp></span><span style="color:#E1E4E8">({</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) schema?: A.InferNarrowestObject&lt;Machine.Definition.Schema&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [...], {
    ...;
}, {
    ...;
}, undefined&gt;&gt; | undefined">schema</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) context?: A.InferNarrowestObject&lt;{
    [$$t]: {
        toggleCount: number;
    };
}&gt; | undefined">context</data-lsp>: </span><span style="color:#B392F0"><data-lsp lsp="(alias) t&lt;{
    toggleCount: number;
}&gt;(): {
    [$$t]: {
        toggleCount: number;
    };
}
import t">t</data-lsp></span><span style="color:#E1E4E8">&lt;{ </span><span style="color:#FFAB70"><data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp></span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">number</span><span style="color:#E1E4E8"> }&gt;()</span></div><div class="line"><span style="color:#E1E4E8">  },</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) context: A.InferNarrowestObject&lt;{
    toggleCount: number;
}&gt;">context</data-lsp>: { <data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp>: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8"> },</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) initial: &quot;inactive&quot; | &quot;active&quot;">initial</data-lsp>: </span><span style="color:#9ECBFF">&#x27;inactive&#x27;</span><span style="color:#E1E4E8">,</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) states: A.InferNarrowestObject&lt;{
    inactive: Machine.Definition.StateNode&lt;{
        schema: {
            context: {
                [$$t]: {
                    toggleCount: number;
                };
            };
        };
        context: {
            toggleCount: number;
        };
        initial: &quot;inactive&quot;;
        states: {
            inactive: {
                on: {
                    TOGGLE: &quot;active&quot;;
                };
            };
            active: {
                on: {
                    TOGGLE: &quot;inactive&quot;;
                };
                effect: unknown;
            };
        };
    }, [...]&gt;;
    active: Machine.Definition.StateNode&lt;...&gt;;
}&gt;">states</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) inactive: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [...]&gt;&gt;">inactive</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [...], {
    ...;
}, {}, string&gt;&gt; | undefined">on</data-lsp>: { <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot; | &quot;active&quot; | A.InferNarrowestObject&lt;{
    target: &quot;inactive&quot; | &quot;active&quot;;
    guard?: ((parameter: {
        context: {
            toggleCount: number;
        };
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp>: </span><span style="color:#9ECBFF">&#x27;active&#x27;</span><span style="color:#E1E4E8"> },</span></div><div class="line"><span style="color:#E1E4E8">    },</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) active: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [...]&gt;&gt;">active</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [...], {
    ...;
}, {}, string&gt;&gt; | undefined">on</data-lsp>: { <data-lsp lsp="(property) TOGGLE: &quot;inactive&quot; | &quot;active&quot; | A.InferNarrowestObject&lt;{
    target: &quot;inactive&quot; | &quot;active&quot;;
    guard?: ((parameter: {
        context: {
            toggleCount: number;
        };
        event: {
            type: &quot;TOGGLE&quot;;
        };
    }) =&gt; boolean) | undefined;
}&gt;">TOGGLE</data-lsp>: </span><span style="color:#9ECBFF">&#x27;inactive&#x27;</span><span style="color:#E1E4E8"> },</span></div><div class="line"><span style="color:#E1E4E8">      </span><span style="color:#B392F0"><data-lsp lsp="(property) effect?: Machine.Definition.Effect&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}, [...], &quot;active&quot;&gt; | undefined">effect</data-lsp></span><span style="color:#E1E4E8">({ </span><span style="color:#FFAB70"><data-lsp lsp="var setContext: Machine.SetContext&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}&gt;">setContext</data-lsp></span><span style="color:#E1E4E8"> }) {</span></div><div class="line"><span style="color:#E1E4E8">        </span><span style="color:#B392F0"><data-lsp lsp="var setContext: (contextUpdater: Machine.ContextUpdater&lt;{
    schema: {
        context: {
            [$$t]: {
                toggleCount: number;
            };
        };
    };
    context: {
        toggleCount: number;
    };
    initial: &quot;inactive&quot;;
    states: {
        inactive: {
            on: {
                TOGGLE: &quot;active&quot;;
            };
        };
        active: {
            on: {
                TOGGLE: &quot;inactive&quot;;
            };
            effect: unknown;
        };
    };
}&gt;) =&gt; {
    ...;
}">setContext</data-lsp></span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70"><data-lsp lsp="(parameter) context: {
    toggleCount: number;
}">context</data-lsp></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> ({ <data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp>: <data-lsp lsp="(parameter) context: {
    toggleCount: number;
}">context</data-lsp>.<data-lsp lsp="(property) toggleCount: number">toggleCount</data-lsp> </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8"> }));</span></div><div class="line"><span style="color:#E1E4E8">      },</span></div><div class="line"><span style="color:#E1E4E8">    },</span></div><div class="line"><span style="color:#E1E4E8">  },</span></div><div class="line"><span style="color:#E1E4E8">});</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p><em>Typed Events</em></p><p>All events are type-infered by default, both in the string notation (<code>send(&quot;UPDATE&quot;)</code>) and the object notation (<code>send({ type: &quot;UPDATE&quot;})</code>). </p><p>If you want, though, you can augment an already typed event to include arbitrary data (which can be useful to provide values to be used inside effects or to update the context). Example:</p><pre class="shiki min-light twoslash lsp" style="background-color:#ffffff;color:#24292eff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#D32F2F">const</span><span style="color:#24292EFF"> [</span><span style="color:#1976D2"><data-lsp lsp="const machine: {
    value: &quot;waiting&quot;;
    context: {
        timeout?: number | undefined;
    };
    event: {
        type: &quot;$$initial&quot;;
    };
    nextEventsT: &quot;PING&quot;[];
    nextEvents: &quot;PING&quot;[];
} | {
    value: &quot;pinged&quot;;
    context: {
        timeout?: number | undefined;
    };
    event: O.ShallowClean&lt;...&gt;;
    nextEventsT: never[];
    nextEvents: &quot;PING&quot;[];
}">machine</data-lsp></span><span style="color:#24292EFF">, </span><span style="color:#1976D2"><data-lsp lsp="const send: Machine.Send&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            on: {
                PING: &quot;pinged&quot;;
            };
        };
        pinged: unknown;
    };
}&gt;">send</data-lsp></span><span style="color:#24292EFF">] </span><span style="color:#D32F2F">=</span><span style="color:#24292EFF"> </span><span style="color:#6F42C1"><data-lsp lsp="(alias) useStateMachine&lt;Machine.Definition&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            on: {
                PING: &quot;pinged&quot;;
            };
        };
        pinged: unknown;
    };
}, {
    ...;
}, {
    ...;
}, false&gt;&gt;(definition: A.InferNarrowestObject&lt;...&gt;): [state: ...]
import useStateMachine">useStateMachine</data-lsp></span><span style="color:#24292EFF">({</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) schema?: A.InferNarrowestObject&lt;Machine.Definition.Schema&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            ...;
        };
        pinged: unknown;
    };
}, [...], {
    ...;
}, {
    ...;
}, {
    ...;
}&gt;&gt; | undefined">schema</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) context?: A.InferNarrowestObject&lt;{
    [$$t]: {
        timeout?: number | undefined;
    };
}&gt; | undefined">context</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#6F42C1"><data-lsp lsp="(alias) t&lt;{
    timeout?: number | undefined;
}&gt;(): {
    [$$t]: {
        timeout?: number | undefined;
    };
}
import t">t</data-lsp></span><span style="color:#24292EFF">&lt;{ <data-lsp lsp="(property) timeout?: number | undefined">timeout</data-lsp></span><span style="color:#D32F2F">?:</span><span style="color:#24292EFF"> </span><span style="color:#1976D2">number</span><span style="color:#24292EFF"> }&gt;(),</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) events?: A.InferNarrowestObject&lt;{
    PING: {
        [$$t]: {
            value: number;
        };
    };
}&gt; | undefined">events</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">      <data-lsp lsp="(property) PING: A.InferNarrowestObject&lt;{
    [$$t]: {
        value: number;
    };
}&gt;">PING</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#6F42C1"><data-lsp lsp="(alias) t&lt;{
    value: number;
}&gt;(): {
    [$$t]: {
        value: number;
    };
}
import t">t</data-lsp></span><span style="color:#24292EFF">&lt;{ <data-lsp lsp="(property) value: number">value</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#1976D2">number</span><span style="color:#24292EFF"> }&gt;()</span></div><div class="line"><span style="color:#24292EFF">    }</span></div><div class="line"><span style="color:#24292EFF">  },</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) context: A.InferNarrowestObject&lt;{
    timeout?: number | undefined;
}&gt;">context</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {<data-lsp lsp="(property) timeout?: number | undefined">timeout</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#1976D2"><data-lsp lsp="var undefined">undefined</data-lsp></span><span style="color:#24292EFF">},</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) initial: &quot;waiting&quot; | &quot;pinged&quot;">initial</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;waiting&#x27;</span><span style="color:#24292EFF">,</span></div><div class="line"><span style="color:#24292EFF">  <data-lsp lsp="(property) states: A.InferNarrowestObject&lt;{
    waiting: Machine.Definition.StateNode&lt;{
        schema: {
            context: {
                [$$t]: {
                    timeout?: number | undefined;
                };
            };
            events: {
                PING: {
                    [$$t]: {
                        value: number;
                    };
                };
            };
        };
        context: {
            timeout: undefined;
        };
        initial: &quot;waiting&quot;;
        states: {
            waiting: {
                ...;
            };
            pinged: unknown;
        };
    }, [...]&gt;;
    pinged: Machine.Definition.StateNode&lt;...&gt;;
}&gt;">states</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) waiting: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            on: {
                ...;
            };
        };
        pinged: unknown;
    };
}, [...]&gt;&gt;">waiting</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            ...;
        };
        pinged: unknown;
    };
}, [...], {
    ...;
}, {
    ...;
}, string&gt;&gt; | undefined">on</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">        <data-lsp lsp="(property) PING: &quot;waiting&quot; | &quot;pinged&quot; | A.InferNarrowestObject&lt;{
    target: &quot;waiting&quot; | &quot;pinged&quot;;
    guard?: ((parameter: {
        context: {
            timeout?: number | undefined;
        };
        event: O.ShallowClean&lt;{
            type: &quot;PING&quot;;
        } &amp; {
            value: number;
        }&gt;;
    }) =&gt; boolean) | undefined;
}&gt;">PING</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;pinged&#x27;</span></div><div class="line"><span style="color:#24292EFF">      }</span></div><div class="line"><span style="color:#24292EFF">    },</span></div><div class="line"><span style="color:#24292EFF">    <data-lsp lsp="(property) pinged: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            on: {
                ...;
            };
        };
        pinged: unknown;
    };
}, [...]&gt;&gt;">pinged</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> {</span></div><div class="line"><span style="color:#24292EFF">      </span><span style="color:#6F42C1"><data-lsp lsp="(property) effect?: Machine.Definition.Effect&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            ...;
        };
        pinged: unknown;
    };
}, [...], &quot;pinged&quot;&gt; | undefined">effect</data-lsp></span><span style="color:#24292EFF">({ <data-lsp lsp="var setContext: Machine.SetContext&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            ...;
        };
        pinged: unknown;
    };
}&gt;">setContext</data-lsp>, <data-lsp lsp="var event: O.ShallowClean&lt;{
    type: &quot;PING&quot;;
} &amp; {
    value: number;
}&gt;">event</data-lsp> }) {</span></div><div class="line"><span style="color:#24292EFF">        </span><span style="color:#6F42C1"><data-lsp lsp="var setContext: (contextUpdater: Machine.ContextUpdater&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            ...;
        };
        pinged: unknown;
    };
}&gt;) =&gt; {
    ...;
}">setContext</data-lsp></span><span style="color:#24292EFF">(<data-lsp lsp="(parameter) c: {
    timeout?: number | undefined;
}">c</data-lsp> </span><span style="color:#D32F2F">=&gt;</span><span style="color:#24292EFF"> ({ <data-lsp lsp="(property) timeout?: number | undefined">timeout</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#1976D2"><data-lsp lsp="var event: O.ShallowClean&lt;{
    type: &quot;PING&quot;;
} &amp; {
    value: number;
}&gt;">event</data-lsp></span><span style="color:#24292EFF">?.<data-lsp lsp="(property) value: number">value</data-lsp> </span><span style="color:#D32F2F">??</span><span style="color:#24292EFF"> </span><span style="color:#1976D2">0</span><span style="color:#24292EFF"> }));</span></div><div class="line"><span style="color:#24292EFF">      },</span></div><div class="line"><span style="color:#24292EFF">    }</span></div><div class="line"><span style="color:#24292EFF">  },</span></div><div class="line"><span style="color:#24292EFF">});</span></div><div class="line">Â </div><div class="line"><span style="color:#6F42C1"><data-lsp lsp="const send: (sendable: O.ShallowClean&lt;{
    type: &quot;PING&quot;;
} &amp; {
    value: number;
}&gt;) =&gt; void (+1 overload)">send</data-lsp></span><span style="color:#24292EFF">({ <data-lsp lsp="(property) type: &quot;PING&quot;">type</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#22863A">&#x27;PING&#x27;</span><span style="color:#24292EFF">, <data-lsp lsp="(property) value: number">value</data-lsp></span><span style="color:#D32F2F">:</span><span style="color:#24292EFF"> </span><span style="color:#1976D2">150</span><span style="color:#24292EFF"> })</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki github-dark twoslash lsp" style="background-color:#24292e;color:#e1e4e8"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#F97583">const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF"><data-lsp lsp="const machine: {
    value: &quot;waiting&quot;;
    context: {
        timeout?: number | undefined;
    };
    event: {
        type: &quot;$$initial&quot;;
    };
    nextEventsT: &quot;PING&quot;[];
    nextEvents: &quot;PING&quot;[];
} | {
    value: &quot;pinged&quot;;
    context: {
        timeout?: number | undefined;
    };
    event: O.ShallowClean&lt;...&gt;;
    nextEventsT: never[];
    nextEvents: &quot;PING&quot;[];
}">machine</data-lsp></span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF"><data-lsp lsp="const send: Machine.Send&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            on: {
                PING: &quot;pinged&quot;;
            };
        };
        pinged: unknown;
    };
}&gt;">send</data-lsp></span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0"><data-lsp lsp="(alias) useStateMachine&lt;Machine.Definition&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            on: {
                PING: &quot;pinged&quot;;
            };
        };
        pinged: unknown;
    };
}, {
    ...;
}, {
    ...;
}, false&gt;&gt;(definition: A.InferNarrowestObject&lt;...&gt;): [state: ...]
import useStateMachine">useStateMachine</data-lsp></span><span style="color:#E1E4E8">({</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) schema?: A.InferNarrowestObject&lt;Machine.Definition.Schema&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            ...;
        };
        pinged: unknown;
    };
}, [...], {
    ...;
}, {
    ...;
}, {
    ...;
}&gt;&gt; | undefined">schema</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) context?: A.InferNarrowestObject&lt;{
    [$$t]: {
        timeout?: number | undefined;
    };
}&gt; | undefined">context</data-lsp>: </span><span style="color:#B392F0"><data-lsp lsp="(alias) t&lt;{
    timeout?: number | undefined;
}&gt;(): {
    [$$t]: {
        timeout?: number | undefined;
    };
}
import t">t</data-lsp></span><span style="color:#E1E4E8">&lt;{ </span><span style="color:#FFAB70"><data-lsp lsp="(property) timeout?: number | undefined">timeout</data-lsp></span><span style="color:#F97583">?:</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">number</span><span style="color:#E1E4E8"> }&gt;(),</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) events?: A.InferNarrowestObject&lt;{
    PING: {
        [$$t]: {
            value: number;
        };
    };
}&gt; | undefined">events</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">      <data-lsp lsp="(property) PING: A.InferNarrowestObject&lt;{
    [$$t]: {
        value: number;
    };
}&gt;">PING</data-lsp>: </span><span style="color:#B392F0"><data-lsp lsp="(alias) t&lt;{
    value: number;
}&gt;(): {
    [$$t]: {
        value: number;
    };
}
import t">t</data-lsp></span><span style="color:#E1E4E8">&lt;{ </span><span style="color:#FFAB70"><data-lsp lsp="(property) value: number">value</data-lsp></span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">number</span><span style="color:#E1E4E8"> }&gt;()</span></div><div class="line"><span style="color:#E1E4E8">    }</span></div><div class="line"><span style="color:#E1E4E8">  },</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) context: A.InferNarrowestObject&lt;{
    timeout?: number | undefined;
}&gt;">context</data-lsp>: {<data-lsp lsp="(property) timeout?: number | undefined">timeout</data-lsp>: </span><span style="color:#79B8FF"><data-lsp lsp="var undefined">undefined</data-lsp></span><span style="color:#E1E4E8">},</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) initial: &quot;waiting&quot; | &quot;pinged&quot;">initial</data-lsp>: </span><span style="color:#9ECBFF">&#x27;waiting&#x27;</span><span style="color:#E1E4E8">,</span></div><div class="line"><span style="color:#E1E4E8">  <data-lsp lsp="(property) states: A.InferNarrowestObject&lt;{
    waiting: Machine.Definition.StateNode&lt;{
        schema: {
            context: {
                [$$t]: {
                    timeout?: number | undefined;
                };
            };
            events: {
                PING: {
                    [$$t]: {
                        value: number;
                    };
                };
            };
        };
        context: {
            timeout: undefined;
        };
        initial: &quot;waiting&quot;;
        states: {
            waiting: {
                ...;
            };
            pinged: unknown;
        };
    }, [...]&gt;;
    pinged: Machine.Definition.StateNode&lt;...&gt;;
}&gt;">states</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) waiting: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            on: {
                ...;
            };
        };
        pinged: unknown;
    };
}, [...]&gt;&gt;">waiting</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">      <data-lsp lsp="(property) on?: A.InferNarrowestObject&lt;Machine.Definition.On&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            ...;
        };
        pinged: unknown;
    };
}, [...], {
    ...;
}, {
    ...;
}, string&gt;&gt; | undefined">on</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">        <data-lsp lsp="(property) PING: &quot;waiting&quot; | &quot;pinged&quot; | A.InferNarrowestObject&lt;{
    target: &quot;waiting&quot; | &quot;pinged&quot;;
    guard?: ((parameter: {
        context: {
            timeout?: number | undefined;
        };
        event: O.ShallowClean&lt;{
            type: &quot;PING&quot;;
        } &amp; {
            value: number;
        }&gt;;
    }) =&gt; boolean) | undefined;
}&gt;">PING</data-lsp>: </span><span style="color:#9ECBFF">&#x27;pinged&#x27;</span></div><div class="line"><span style="color:#E1E4E8">      }</span></div><div class="line"><span style="color:#E1E4E8">    },</span></div><div class="line"><span style="color:#E1E4E8">    <data-lsp lsp="(property) pinged: A.InferNarrowestObject&lt;Machine.Definition.StateNode&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            on: {
                ...;
            };
        };
        pinged: unknown;
    };
}, [...]&gt;&gt;">pinged</data-lsp>: {</span></div><div class="line"><span style="color:#E1E4E8">      </span><span style="color:#B392F0"><data-lsp lsp="(property) effect?: Machine.Definition.Effect&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            ...;
        };
        pinged: unknown;
    };
}, [...], &quot;pinged&quot;&gt; | undefined">effect</data-lsp></span><span style="color:#E1E4E8">({ </span><span style="color:#FFAB70"><data-lsp lsp="var setContext: Machine.SetContext&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            ...;
        };
        pinged: unknown;
    };
}&gt;">setContext</data-lsp></span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70"><data-lsp lsp="var event: O.ShallowClean&lt;{
    type: &quot;PING&quot;;
} &amp; {
    value: number;
}&gt;">event</data-lsp></span><span style="color:#E1E4E8"> }) {</span></div><div class="line"><span style="color:#E1E4E8">        </span><span style="color:#B392F0"><data-lsp lsp="var setContext: (contextUpdater: Machine.ContextUpdater&lt;{
    schema: {
        context: {
            [$$t]: {
                timeout?: number | undefined;
            };
        };
        events: {
            PING: {
                [$$t]: {
                    value: number;
                };
            };
        };
    };
    context: {
        timeout: undefined;
    };
    initial: &quot;waiting&quot;;
    states: {
        waiting: {
            ...;
        };
        pinged: unknown;
    };
}&gt;) =&gt; {
    ...;
}">setContext</data-lsp></span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70"><data-lsp lsp="(parameter) c: {
    timeout?: number | undefined;
}">c</data-lsp></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> ({ <data-lsp lsp="(property) timeout?: number | undefined">timeout</data-lsp>: <data-lsp lsp="var event: O.ShallowClean&lt;{
    type: &quot;PING&quot;;
} &amp; {
    value: number;
}&gt;">event</data-lsp>?.<data-lsp lsp="(property) value: number">value</data-lsp> </span><span style="color:#F97583">??</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8"> }));</span></div><div class="line"><span style="color:#E1E4E8">      },</span></div><div class="line"><span style="color:#E1E4E8">    }</span></div><div class="line"><span style="color:#E1E4E8">  },</span></div><div class="line"><span style="color:#E1E4E8">});</span></div><div class="line">Â </div><div class="line"><span style="color:#B392F0"><data-lsp lsp="const send: (sendable: O.ShallowClean&lt;{
    type: &quot;PING&quot;;
} &amp; {
    value: number;
}&gt;) =&gt; void (+1 overload)">send</data-lsp></span><span style="color:#E1E4E8">({ <data-lsp lsp="(property) type: &quot;PING&quot;">type</data-lsp>: </span><span style="color:#9ECBFF">&#x27;PING&#x27;</span><span style="color:#E1E4E8">, <data-lsp lsp="(property) value: number">value</data-lsp>: </span><span style="color:#79B8FF">150</span><span style="color:#E1E4E8"> })</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p><strong>Note</strong> that you don&#x27;t need to declare all your events in the schema, only the ones you&#x27;re adding arbitrary keys and values.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/cassiozen/useStateMachine/edit/main/docs/docs/api.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/getting-started/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Getting Started</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/upgrading-from-0xx/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Upgrading from 0.x.x Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#state" class="table-of-contents__link">state</a></li><li><a href="#send-events" class="table-of-contents__link">Send events</a></li><li><a href="#state-machine-definition" class="table-of-contents__link">State Machine definition</a></li><li><a href="#defining-states" class="table-of-contents__link">Defining States</a><ul><li><a href="#on-events--transitions" class="table-of-contents__link">On (Events &amp; transitions)</a></li><li><a href="#effects-entryexit-callbacks" class="table-of-contents__link">Effects (entry/exit callbacks)</a></li></ul></li><li><a href="#extended-state-context" class="table-of-contents__link">Extended state (context)</a></li><li><a href="#schema-context--event-typing" class="table-of-contents__link">Schema: Context &amp; Event Typing</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.c67d40e1.js"></script>
<script src="/assets/js/main.14e444e8.js"></script>
</body>
</html>